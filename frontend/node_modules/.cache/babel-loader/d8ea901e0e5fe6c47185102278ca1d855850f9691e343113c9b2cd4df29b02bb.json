{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arnav\\\\IdeaProjects\\\\Adore\\\\React_online_Store\\\\frontend\\\\src\\\\components\\\\wishlist.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useContext, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport classes from './wishlist.module.css';\nimport Card from './card';\nimport { useNavigate, NavLink } from 'react-router-dom';\nimport Modal from './Modal';\nimport Notification from './notification';\nimport { WishlistContext } from '../Context/wishlist-context';\nimport { AuthContext } from '../Context/auth-context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WishlistPage = () => {\n  _s();\n  const {\n    wishlist,\n    updateWishlist\n  } = useContext(WishlistContext);\n  const {\n    userId,\n    isLoggedIn\n  } = useContext(AuthContext);\n  console.log(wishlist);\n  const [wishlistItems, setWishlistItems] = useState([]);\n  //const showCart = useSelector((state) => state.ui.cartIsVisible);\n  const notification = useSelector(state => state.ui.notification);\n  const modal = useRef();\n  const navigate = useNavigate();\n  const [showModal, setShowModal] = useState(true);\n  useEffect(() => {\n    if (wishlist.length > 0) {\n      fetchWishlistItems();\n      setShowModal(true);\n      modal.current.open();\n    }\n  });\n  useEffect(() => {\n    if (wishlist.length > 0) {\n      fetchWishlistItems();\n      setShowModal(true);\n      modal.current.open();\n    } else navigate(-2);\n    return () => {\n      console.log('in return');\n      setShowModal(false);\n      (async () => {\n        if (!isLoggedIn) return;\n        const lsWishlist = JSON.parse(localStorage.getItem(\"Wishlist\"));\n        try {\n          await fetch(`http://localhost:5000/user/wishlist`, {\n            method: 'PUT',\n            headers: {\n              'content-type': 'application/json'\n            },\n            body: JSON.stringify({\n              id: userId,\n              wishlist: lsWishlist\n            })\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      })();\n    };\n  }, [wishlist, isLoggedIn, userId, navigate, showModal]);\n  function handleReset() {\n    setShowModal(false);\n    modal.current.close();\n    navigate(-1);\n  }\n  const removeFromWishlist = id => {\n    //event.preventDefault();\n    let newWishlist = [...wishlist];\n    newWishlist = wishlist.filter(item => item !== id);\n    localStorage.setItem(\"Wishlist\", JSON.stringify(newWishlist));\n    updateWishlist(newWishlist);\n    console.log(newWishlist, wishlist);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      ref: modal,\n      onReset: handleReset,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Wishlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.container,\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: classes.gallery,\n          children: wishlistItems.length && wishlistItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: classes.item,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                textAlign: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(NavLink, {\n                to: {\n                  pathname: `/fabrics/${item._id}/${item.category}`\n                },\n                className: ({\n                  isActive\n                }) => isActive ? classes.active : undefined,\n                end: true,\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  style: {\n                    width: '200px',\n                    height: '300px',\n                    align: 'center'\n                  },\n                  src: item.image,\n                  alt: \"Cinque Terre\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.desc,\n                  children: item.desc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-regular fa-trash-can\",\n                  onClick: () => removeFromWishlist(item._id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 13\n            }, this)\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: classes.button,\n          onClick: handleReset,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(WishlistPage, \"1rka2xT1cGiUEMpVZ+R15DsbzzA=\", false, function () {\n  return [useSelector, useNavigate];\n});\n_c = WishlistPage;\nexport default WishlistPage;\nvar _c;\n$RefreshReg$(_c, \"WishlistPage\");","map":{"version":3,"names":["useEffect","useRef","useContext","useState","useSelector","useDispatch","classes","Card","useNavigate","NavLink","Modal","Notification","WishlistContext","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","WishlistPage","_s","wishlist","updateWishlist","userId","isLoggedIn","console","log","wishlistItems","setWishlistItems","notification","state","ui","modal","navigate","showModal","setShowModal","length","fetchWishlistItems","current","open","lsWishlist","JSON","parse","localStorage","getItem","fetch","method","headers","body","stringify","id","error","handleReset","close","removeFromWishlist","newWishlist","filter","item","setItem","children","ref","onReset","fileName","_jsxFileName","lineNumber","columnNumber","className","container","gallery","map","style","display","flexDirection","alignItems","textAlign","to","pathname","_id","category","isActive","active","undefined","end","width","height","align","src","image","alt","desc","onClick","actions","button","_c","$RefreshReg$"],"sources":["C:/Users/Arnav/IdeaProjects/Adore/React_online_Store/frontend/src/components/wishlist.js"],"sourcesContent":["import {useEffect, useRef, useContext, useState} from 'react';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport classes from './wishlist.module.css';\r\n\r\nimport Card from './card';\r\nimport {useNavigate,NavLink} from 'react-router-dom';\r\nimport Modal from './Modal';\r\nimport Notification from './notification';\r\n\r\nimport {WishlistContext} from '../Context/wishlist-context';\r\nimport {AuthContext} from '../Context/auth-context';\r\n\r\nconst WishlistPage=()=>{\r\n\r\n    const {wishlist, updateWishlist}=useContext(WishlistContext);\r\n    const {userId, isLoggedIn}=useContext(AuthContext);\r\nconsole.log(wishlist);\r\n    const [wishlistItems,setWishlistItems]=useState([]);\r\n    //const showCart = useSelector((state) => state.ui.cartIsVisible);\r\n    const notification = useSelector((state) => state.ui.notification);\r\n    const modal=useRef();\r\n    const navigate=useNavigate();\r\n    const [showModal, setShowModal]= useState(true);\r\n\r\n    useEffect(()=>{\r\n        if(wishlist.length>0){\r\n            fetchWishlistItems();\r\n            setShowModal(true);\r\n            modal.current.open();\r\n        }\r\n    });\r\n     useEffect(()=>{\r\n\r\n        if(wishlist.length>0){\r\n            fetchWishlistItems();\r\n            setShowModal(true);\r\n            modal.current.open();\r\n        }\r\n         else\r\n            navigate(-2);\r\n\r\n            return()=>{\r\n            console.log('in return');\r\n            setShowModal(false);\r\n                (async()=>{\r\n                if(!isLoggedIn) return;\r\n                const lsWishlist=JSON.parse(localStorage.getItem(\"Wishlist\"));\r\n                 try{\r\n                    await fetch(\r\n                        `http://localhost:5000/user/wishlist`,\r\n                    {\r\n                        method: 'PUT',\r\n                        headers:{'content-type':'application/json'},\r\n                        body:JSON.stringify({\r\n                          id:userId,\r\n                          wishlist:lsWishlist})\r\n                    });\r\n                }\r\n                catch(error){\r\n                    console.log(error);\r\n                }\r\n            })();\r\n          }\r\n        }, [wishlist, isLoggedIn, userId, navigate, showModal]);\r\n\r\n    function handleReset(){\r\n        setShowModal(false);\r\n        modal.current.close();\r\n        navigate(-1);\r\n     }\r\n\r\n     const removeFromWishlist=(id)=>{\r\n        //event.preventDefault();\r\n         let newWishlist=[...wishlist]\r\n         newWishlist=wishlist.filter((item)=>item!==id);\r\n\r\n         localStorage.setItem(\"Wishlist\",JSON.stringify(newWishlist));\r\n         updateWishlist(newWishlist);\r\n         console.log(newWishlist, wishlist);\r\n      }\r\n\r\n       return(<>\r\n        <Modal ref={modal} onReset={handleReset} >\r\n\r\n        <h2>My Wishlist</h2>\r\n        <div  className={classes.container}>\r\n\r\n        <ul className={classes.gallery}>\r\n        { wishlistItems.length && wishlistItems.map((item)=>(\r\n            <li key={item._id} className={classes.item}>\r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', textAlign: 'center' }}>\r\n                <NavLink to={{pathname:`/fabrics/${item._id}/${item.category}` }}  className={({isActive})=>isActive?classes.active:undefined}end>\r\n                    <img style={{width:'200px',height:'300px',align:'center'}} src={item.image} alt=\"Cinque Terre\"/>\r\n                <div className={classes.desc}>{item.desc}</div>\r\n                </NavLink>\r\n                <div><i className=\"fa-regular fa-trash-can\" onClick={()=>removeFromWishlist(item._id)}></i></div>\r\n            </div>\r\n            </li>\r\n        ))}\r\n        </ul></div>\r\n        <div className={classes.actions}><button className={classes.button} onClick={handleReset}>Back</button></div>\r\n        </Modal>\r\n\r\n</>\r\n);\r\n\r\n }\r\n\r\n\r\n    export default WishlistPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}