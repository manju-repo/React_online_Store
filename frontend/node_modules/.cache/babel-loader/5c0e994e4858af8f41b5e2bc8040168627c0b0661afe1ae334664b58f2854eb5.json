{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arnav\\\\IdeaProjects\\\\Adore\\\\React_online_Store\\\\frontend\\\\src\\\\pages\\\\Authentication.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport AuthForm from '../components/AuthForm';\nimport { json, redirect, useParams, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../Context/auth-context';\nimport { NotificationContext } from '../Context/notification-context';\nimport { useContext, useEffect } from 'react';\nimport Notification from '../components/notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AuthenticationPage = () => {\n  _s();\n  const authCtx = useContext(AuthContext);\n  const notCtx = useContext(NotificationContext);\n  const navigate = useNavigate();\n  const [errors, setErrors] = useState();\n  const [mode, setMode] = useState(null);\n  const [order, setOrder] = useState('');\n  useEffect(() => {\n    // Initialize `mode` and `order` based on query parameters\n    const searchParams = new URLSearchParams(window.location.search);\n    const currentMode = searchParams.get('mode');\n    const currentOrder = searchParams.get('order');\n    setMode(currentMode || 'login');\n    setOrder(currentOrder || '');\n    console.log(searchParams.get('mode'));\n  });\n  useEffect(() => {\n    if (authCtx.isLoggedIn) {\n      navigate('/homepage');\n    }\n  }, [authCtx.isLoggedIn, navigate]);\n  const getData = async formData => {\n    console.log(mode);\n    if (!mode) return;\n    if (mode === 'signup' && formData.password !== formData['confirm_password']) {\n      setErrors(['Password and Confirm Password not matching']);\n      return;\n    }\n    let authData;\n    if (mode === 'signup') {\n      authData = new FormData();\n      authData.append('email', formData.email);\n      authData.append('password', formData.password);\n      authData.append('user_type', formData.user_type);\n      console.log(formData, authData);\n      console.log(authData.get('email'), formData.password);\n      if (mode === 'signup') {\n        authData.append('name', formData.first_name + \" \" + formData.last_name);\n        authData.append('phone', formData.phone);\n        if (formData.profileImage && formData.profileImage[0]) authData.append('profileImage', formData.profileImage[0]);else {\n          var _formData$first_name, _formData$last_name;\n          const initials = `${((_formData$first_name = formData.first_name) === null || _formData$first_name === void 0 ? void 0 : _formData$first_name[0]) || ''}${((_formData$last_name = formData.last_name) === null || _formData$last_name === void 0 ? void 0 : _formData$last_name[0]) || ''}`;\n          authData.append('profileImage', initials || 'NO_IMAGE');\n        }\n        console.log(authData);\n        if (authData.user_type === 'admin' && formData.account_number === formData.confirm_account_number) {\n          authData.append('bus_name', formData.bus_name);\n          authData.append('bus_type', formData.bus_type);\n          authData.append('bus_category', formData.bus_category);\n          authData.append('bus_subcategory', formData.bus_subcategory);\n          authData.append('pan', formData.pan);\n          authData.append('gstin', formData.gstin);\n        }\n        // address is an array like ['Line1', 'Line2', 'City']\n        const addressArray = formData.address;\n        // Loop through the array and append each element separately\n        addressArray.forEach((addressLine, index) => {\n          authData.append(`address[${index}]`, addressLine);\n        });\n        authData.append('account_number', formData.account_number);\n        authData.append('account_holder_name', formData.account_holder_name);\n        authData.append('ifsc_code', formData.ifsc_code);\n      }\n      //first created cart/wishlist/order and then signed up\n      const cart_id = JSON.parse(localStorage.getItem('cartId'));\n      authData.append('cart_id', cart_id || null);\n      const wishlist = JSON.parse(localStorage.getItem('wishlist'));\n      authData.append('wishlist', wishlist || null);\n      const orders = JSON.parse(localStorage.getItem('orders'));\n      authData.append('orders', orders || null);\n    } else if (mode === 'login') {\n      authData = JSON.stringify({\n        email: formData.email,\n        password: formData.password,\n        cart_id: JSON.parse(localStorage.getItem('cartId')) || null,\n        wishlist: JSON.parse(localStorage.getItem('wishlist')) || null,\n        orders: JSON.parse(localStorage.getItem('orders')) || null\n      });\n    }\n    console.log(authData);\n    const response = await fetch(`http://localhost:5000/user/${mode}`, {\n      method: 'POST',\n      headers: mode === 'login' ? {\n        'Content-Type': 'application/json'\n      } : {},\n      //because of profile picture in signup\n      body: authData\n    });\n    console.log(response);\n    if (!response.ok) {\n      //console.log(response);\n      let errorData = null;\n      try {\n        errorData = await response.json();\n        console.error('Error:', errorData.message);\n      } catch (e) {\n        setErrors(e.message);\n      }\n      setErrors(errorData.message);\n      return;\n      // Handle the error message (e.g., display it to the user)\n      // throw json({message:errorData.message},{status:500});\n    }\n\n    //for admin user sign up create razorpay account\n    if (mode === 'signup' && formData.user_type === 'admin') {\n      try {\n        const acc_response = await fetch('http://localhost:5000/user/createRazorpayAccount', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(authData)\n        });\n        console.log(response);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    try {\n      const resData = await response.json();\n      console.log(\"json response \", resData);\n      const token = resData.token;\n      const userid = resData.userId;\n      const usertype = resData.user_type;\n      //const superAdmin=resData.super_admin;\n      const expiration = new Date();\n      expiration.setHours(expiration.getHours() + 1);\n      console.log(usertype);\n      //=========================\n      try {\n        let profileImage,\n          superAdmin = null,\n          isSubscribed = null;\n        const response = await fetch(`http://localhost:5000/user/${userid}`);\n        if (!response) {\n          throw new Error('Updating User failed');\n        }\n        const respData = await response.json();\n        if (respData) {\n          var _isSubscribed, _isSubscribed2;\n          const loggedUser = respData.user;\n          console.log(loggedUser);\n          const user_cart = loggedUser.cart_id;\n          const user_wl = loggedUser.wishlist;\n          profileImage = loggedUser.profileImage;\n          superAdmin = loggedUser.super_admin;\n          isSubscribed = loggedUser.notificationPreferences;\n          console.log('isSubscribed ', (_isSubscribed = isSubscribed) === null || _isSubscribed === void 0 ? void 0 : _isSubscribed.pushSubscribed);\n          if ((_isSubscribed2 = isSubscribed) !== null && _isSubscribed2 !== void 0 && _isSubscribed2.pushSubscribed) {\n            let notificationResponse;\n            if (usertype === 'admin') notificationResponse = await fetch('http://localhost:5000/notifications', {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + token\n              }\n            });else notificationResponse = await fetch('http://localhost:5000/notifications/user', {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + token\n              }\n            });\n            if (notificationResponse.ok) {\n              const {\n                notifications\n              } = await notificationResponse.json();\n              if (notifications) localStorage.setItem('Notifications', JSON.stringify(notifications));\n              console.log(notifications);\n            }\n          }\n          const ordersResp = await fetch(`http://localhost:5000/orders/getActiveOrders/${userid}`, {\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/json'\n            }\n          });\n          console.log(ordersResp);\n          if (!ordersResp) throw new Error('Could not fetch your orders');\n          const orders = await ordersResp.json();\n          const user_orders = orders.data;\n          console.log(user_orders);\n          localStorage.setItem('avatar', profileImage);\n          console.log(JSON.stringify(profileImage));\n          if (!authCtx.isAdmin && user_cart && JSON.parse(localStorage.getItem('cartId'))) {\n            if (user_cart !== JSON.parse(localStorage.getItem('cartId'))) {\n              let concan = window.confirm(\"Do you want to replace your previous cart with the new one?\");\n              if (concan) {\n                //user_cart=JSON.parse(localStorage.getItem('cartId'));\n                await fetch(`http://localhost:5000/user/cart`, {\n                  method: 'PUT',\n                  headers: {\n                    'content-type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    id: userid,\n                    cart_id: JSON.parse(localStorage.getItem('cartId'))\n                  })\n                });\n              } else localStorage.setItem('cartId', JSON.stringify(user_cart));\n            } else localStorage.setItem('cartId', JSON.stringify(user_cart));\n          }\n          if (!authCtx.isAdmin && user_wl && JSON.parse(localStorage.getItem('Wishlist'))) {\n            if (user_wl !== JSON.parse(localStorage.getItem('Wishlist'))) {\n              let concan = window.confirm(\"Do you want to replace your previous wishlist with the new one?\");\n              if (concan) {\n                //user_wl=JSON.parse(localStorage.getItem('wishlist'));\n                await fetch(`http://localhost:5000/user/wishlist`, {\n                  method: 'PUT',\n                  headers: {\n                    'content-type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    id: userid,\n                    wishlist: JSON.parse(localStorage.getItem('wishlist'))\n                  })\n                });\n              } else localStorage.setItem('wishlist', JSON.stringify(user_wl));\n            } else localStorage.setItem('wishlist', JSON.stringify(user_wl));\n          }\n          if (user_orders) localStorage.setItem('orders', JSON.stringify(user_orders));\n        }\n        console.log(superAdmin, isSubscribed);\n        //localStorage.setItem('superAdmin',JSON.stringify(superAdmin)|| false);\n        //localStorage.setItem('isSubscribed',JSON.stringify(isSubscribed)|| null);\n\n        authCtx.login(userid, token, expiration, usertype, isSubscribed);\n      } catch (error) {\n        console.log(error.message);\n      }\n      //===================\n\n      //authCtx.isAdmin=(usertype==='admin');\n      //console.log(\"admin \",usertype);\n      //console.log(authCtx.isAdmin);\n      if (order && order === 'open') window.history.back();\n      if (usertype === 'admin') {\n        navigate(\"/clientOrders\");\n      } else navigate(\"/homepage\");\n      console.log(token, userid, expiration);\n    } catch (e) {\n      setErrors(e.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [errors && /*#__PURE__*/_jsxDEV(Notification, {\n      status: \"error\",\n      message: errors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(AuthForm, {\n      onSubmit: getData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true);\n};\n_s(AuthenticationPage, \"M1PzzlZNaiGo8EhE2ocqSOVE0GI=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthenticationPage;\nexport default AuthenticationPage;\nvar _c;\n$RefreshReg$(_c, \"AuthenticationPage\");","map":{"version":3,"names":["useState","AuthForm","json","redirect","useParams","useNavigate","AuthContext","NotificationContext","useContext","useEffect","Notification","jsxDEV","_jsxDEV","Fragment","_Fragment","AuthenticationPage","_s","authCtx","notCtx","navigate","errors","setErrors","mode","setMode","order","setOrder","searchParams","URLSearchParams","window","location","search","currentMode","get","currentOrder","console","log","isLoggedIn","getData","formData","password","authData","FormData","append","email","user_type","first_name","last_name","phone","profileImage","_formData$first_name","_formData$last_name","initials","account_number","confirm_account_number","bus_name","bus_type","bus_category","bus_subcategory","pan","gstin","addressArray","address","forEach","addressLine","index","account_holder_name","ifsc_code","cart_id","JSON","parse","localStorage","getItem","wishlist","orders","stringify","response","fetch","method","headers","body","ok","errorData","error","message","e","acc_response","err","resData","token","userid","userId","usertype","expiration","Date","setHours","getHours","superAdmin","isSubscribed","Error","respData","_isSubscribed","_isSubscribed2","loggedUser","user","user_cart","user_wl","super_admin","notificationPreferences","pushSubscribed","notificationResponse","notifications","setItem","ordersResp","user_orders","data","isAdmin","concan","confirm","id","login","history","back","children","status","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/Arnav/IdeaProjects/Adore/React_online_Store/frontend/src/pages/Authentication.js"],"sourcesContent":["import {useState} from 'react';\r\nimport AuthForm from '../components/AuthForm';\r\nimport {json, redirect, useParams, useNavigate} from'react-router-dom';\r\nimport {AuthContext} from '../Context/auth-context';\r\nimport {NotificationContext} from '../Context/notification-context';\r\n\r\nimport {useContext, useEffect} from'react';\r\nimport Notification from '../components/notification';\r\n\r\n\r\nconst AuthenticationPage=()=>{\r\nconst authCtx=useContext(AuthContext);\r\nconst notCtx=useContext(NotificationContext);\r\nconst navigate= useNavigate();\r\nconst [errors, setErrors]=useState();\r\nconst [mode, setMode] = useState(null);\r\n    const [order, setOrder] = useState('');\r\n\r\n    useEffect(() => {\r\n        // Initialize `mode` and `order` based on query parameters\r\n        const searchParams = new URLSearchParams(window.location.search);\r\n        const currentMode = searchParams.get('mode');\r\n        const currentOrder = searchParams.get('order');\r\n        setMode(currentMode || 'login');\r\n        setOrder(currentOrder || '');\r\n        console.log(searchParams.get('mode'));\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (authCtx.isLoggedIn) {\r\n            navigate('/homepage');\r\n        }\r\n    }, [authCtx.isLoggedIn, navigate]);\r\n\r\n    const getData=async(formData)=>{\r\nconsole.log(mode);\r\nif(!mode) return;\r\n     if (mode==='signup' && (formData.password !== formData['confirm_password'])){\r\n         setErrors(['Password and Confirm Password not matching']);\r\n         return;\r\n     }\r\n     let authData;\r\n     if(mode==='signup'){\r\n     authData = new FormData();\r\n     authData.append('email',formData.email);\r\n     authData.append('password',formData.password);\r\n     authData.append('user_type',formData.user_type);\r\n     console.log(formData,authData);\r\nconsole.log(authData.get('email'),formData.password);\r\n     if(mode==='signup'){\r\n        authData.append('name',formData.first_name + \" \" + formData.last_name);\r\n        authData.append('phone',formData.phone);\r\n        if (formData.profileImage && formData.profileImage[0])\r\n            authData.append('profileImage',formData.profileImage[0]);\r\n        else{\r\n            const initials = `${formData.first_name?.[0] || ''}${formData.last_name?.[0] || ''}`;\r\n\r\n            authData.append('profileImage', initials || 'NO_IMAGE');\r\n        }\r\nconsole.log(authData);\r\n\r\n        if(authData.user_type==='admin' && (formData.account_number===formData.confirm_account_number)){\r\n            authData.append('bus_name',formData.bus_name);\r\n            authData.append('bus_type',formData.bus_type);\r\n            authData.append('bus_category',formData.bus_category);\r\n            authData.append('bus_subcategory',formData.bus_subcategory);\r\n            authData.append('pan',formData.pan);\r\n            authData.append('gstin',formData.gstin);\r\n        }\r\n        // address is an array like ['Line1', 'Line2', 'City']\r\n            const addressArray = formData.address;\r\n            // Loop through the array and append each element separately\r\n            addressArray.forEach((addressLine, index) => {\r\n                authData.append(`address[${index}]`, addressLine);\r\n            });\r\n\r\n            authData.append('account_number',formData.account_number);\r\n            authData.append('account_holder_name',formData.account_holder_name);\r\n            authData.append('ifsc_code',formData.ifsc_code);\r\n     }\r\n     //first created cart/wishlist/order and then signed up\r\n    const cart_id=JSON.parse(localStorage.getItem('cartId'));\r\n    authData.append('cart_id', cart_id||null);\r\n\r\n    const wishlist=JSON.parse(localStorage.getItem('wishlist'));\r\n    authData.append('wishlist', wishlist||null);\r\n\r\n    const orders=JSON.parse(localStorage.getItem('orders'));\r\n    authData.append('orders',orders||null);\r\n    }\r\n\r\n   else if (mode === 'login') {\r\n        authData = JSON.stringify({\r\n          email: formData.email,\r\n          password: formData.password,\r\n          cart_id: JSON.parse(localStorage.getItem('cartId')) || null,\r\n          wishlist: JSON.parse(localStorage.getItem('wishlist')) || null,\r\n          orders: JSON.parse(localStorage.getItem('orders')) || null,\r\n        });\r\n    }\r\n\r\n    console.log(authData);\r\n     const response= await fetch(`http://localhost:5000/user/${mode}`, {\r\n      method: 'POST',\r\n      headers: mode === 'login' ? { 'Content-Type': 'application/json' } : {},  //because of profile picture in signup\r\n      body: authData\r\n     });\r\n\r\n\r\n\r\n  console.log(response);\r\n\r\n\r\n       if (!response.ok) {\r\n       //console.log(response);\r\n       let errorData=null;\r\n       try{\r\n          errorData = await response.json();\r\n         console.error('Error:', errorData.message);\r\n         }catch(e){\r\n           setErrors(e.message);\r\n         }\r\n          setErrors(errorData.message);\r\n          return;\r\n         // Handle the error message (e.g., display it to the user)\r\n        // throw json({message:errorData.message},{status:500});\r\n     }\r\n\r\n\r\n//for admin user sign up create razorpay account\r\n if(mode==='signup' && formData.user_type==='admin'){\r\n\r\n    try{\r\n        const acc_response= await fetch('http://localhost:5000/user/createRazorpayAccount', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(authData)\r\n         });\r\n        console.log(response);\r\n    }\r\n    catch(err){\r\n        console.log(err);\r\n    }\r\n}\r\n     try{\r\n       const resData= await response.json();\r\n       console.log(\"json response \",resData);\r\n       const token=resData.token;\r\n       const userid=resData.userId;\r\n       const usertype=resData.user_type;\r\n       //const superAdmin=resData.super_admin;\r\n       const expiration=new Date();\r\n       expiration.setHours(expiration.getHours()+1);\r\n       console.log(usertype);\r\n  //=========================\r\n      try{\r\n        let profileImage,superAdmin=null, isSubscribed=null;\r\n         const response=await fetch(`http://localhost:5000/user/${userid}`);\r\n          if (!response){\r\n             throw new Error('Updating User failed');\r\n          }\r\n         const respData=await response.json();\r\n         if(respData){\r\n           const loggedUser= respData.user;\r\n           console.log(loggedUser);\r\n           const user_cart= loggedUser.cart_id;\r\n           const user_wl= loggedUser.wishlist;\r\n           profileImage= loggedUser.profileImage;\r\n           superAdmin= loggedUser.super_admin;\r\n           isSubscribed=loggedUser.notificationPreferences;\r\n           console.log('isSubscribed ', isSubscribed?.pushSubscribed);\r\n\r\n           if(isSubscribed?.pushSubscribed){\r\n                let notificationResponse;\r\n                if(usertype==='admin')\r\n                     notificationResponse=await fetch('http://localhost:5000/notifications',{\r\n                       method:'GET',\r\n                       headers:{\r\n                           'Content-Type':'application/json',\r\n                            'Authorization':'Bearer '+ token}\r\n                       });\r\n                else\r\n                     notificationResponse=await fetch('http://localhost:5000/notifications/user',{\r\n                        method:'GET',\r\n                        headers:{\r\n                            'Content-Type':'application/json',\r\n                             'Authorization':'Bearer '+ token}\r\n                        });\r\n\r\n                if(notificationResponse.ok){\r\n                    const {notifications}=await notificationResponse.json();\r\n                    if(notifications)\r\n                       localStorage.setItem('Notifications',JSON.stringify(notifications));\r\n\r\n                    console.log(notifications);\r\n                }\r\n           }\r\n                const ordersResp=await fetch(`http://localhost:5000/orders/getActiveOrders/${userid}`,{\r\n                headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                        'Content-Type': 'application/json',\r\n                },});\r\n                console.log(ordersResp);\r\n                if(!ordersResp)\r\n                    throw new Error('Could not fetch your orders');\r\n                const orders=await ordersResp.json();\r\n                const user_orders=orders.data;\r\n\r\n                console.log(user_orders);\r\n\r\n           localStorage.setItem('avatar',(profileImage));\r\n           console.log(JSON.stringify(profileImage));\r\n           if(!authCtx.isAdmin && user_cart && JSON.parse(localStorage.getItem('cartId'))){\r\n            if(user_cart !== JSON.parse(localStorage.getItem('cartId'))){\r\n              let concan=window.confirm(\"Do you want to replace your previous cart with the new one?\");\r\n              if(concan){\r\n                   //user_cart=JSON.parse(localStorage.getItem('cartId'));\r\n                    await fetch(\r\n                          `http://localhost:5000/user/cart`,\r\n                      {\r\n                          method: 'PUT',\r\n                          headers:{'content-type':'application/json'},\r\n                          body:JSON.stringify({\r\n                            id:userid,\r\n                            cart_id:JSON.parse(localStorage.getItem('cartId'))})\r\n                      })\r\n              }\r\n              else\r\n                   localStorage.setItem('cartId',JSON.stringify(user_cart));\r\n              }\r\n              else\r\n                   localStorage.setItem('cartId',JSON.stringify(user_cart));\r\n           }\r\n           if(!authCtx.isAdmin && user_wl && JSON.parse(localStorage.getItem('Wishlist'))){\r\n              if(user_wl !== JSON.parse(localStorage.getItem('Wishlist'))){\r\n                  let concan=window.confirm(\"Do you want to replace your previous wishlist with the new one?\");\r\n                  if(concan){\r\n                       //user_wl=JSON.parse(localStorage.getItem('wishlist'));\r\n                       await fetch(\r\n                              `http://localhost:5000/user/wishlist`,\r\n                          {\r\n                              method: 'PUT',\r\n                              headers:{'content-type':'application/json'},\r\n                              body:JSON.stringify({\r\n                                id:userid,\r\n                                wishlist:JSON.parse(localStorage.getItem('wishlist'))})\r\n                          })\r\n                  }\r\n                  else\r\n                       localStorage.setItem('wishlist',JSON.stringify(user_wl));\r\n               }\r\n               else\r\n                  localStorage.setItem('wishlist',JSON.stringify(user_wl));\r\n\r\n           }\r\n\r\n           if(user_orders)\r\n                  localStorage.setItem('orders',JSON.stringify(user_orders));\r\n\r\n         }\r\n         console.log(superAdmin, isSubscribed);\r\n         //localStorage.setItem('superAdmin',JSON.stringify(superAdmin)|| false);\r\n         //localStorage.setItem('isSubscribed',JSON.stringify(isSubscribed)|| null);\r\n\r\n       authCtx.login(userid, token, expiration,usertype, isSubscribed);\r\n\r\n       }catch(error)\r\n       {\r\n         console.log(error.message);\r\n       }\r\n //===================\r\n\r\n\r\n\r\n       //authCtx.isAdmin=(usertype==='admin');\r\n       //console.log(\"admin \",usertype);\r\n       //console.log(authCtx.isAdmin);\r\n        if(order && order==='open')\r\n            window.history.back();\r\n\r\n        if(usertype==='admin'){\r\n            navigate(\"/clientOrders\");\r\n        }\r\n        else\r\n            navigate(\"/homepage\");\r\n               console.log(token, userid, expiration);\r\n\r\n        }catch(e){\r\n           setErrors(e.message);\r\n\r\n         }\r\n}\r\nreturn (\r\n<>\r\n\r\n   {errors && <Notification status='error' message={errors}/>}\r\n  <AuthForm onSubmit={getData}/>\r\n</>\r\n)\r\n}\r\nexport default AuthenticationPage;\r\n\r\n\r\n"],"mappings":";;AAAA,SAAQA,QAAQ,QAAO,OAAO;AAC9B,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,SAAQC,IAAI,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAM,kBAAkB;AACtE,SAAQC,WAAW,QAAO,yBAAyB;AACnD,SAAQC,mBAAmB,QAAO,iCAAiC;AAEnE,SAAQC,UAAU,EAAEC,SAAS,QAAM,OAAO;AAC1C,OAAOC,YAAY,MAAM,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAGtD,MAAMC,kBAAkB,GAACA,CAAA,KAAI;EAAAC,EAAA;EAC7B,MAAMC,OAAO,GAACT,UAAU,CAACF,WAAW,CAAC;EACrC,MAAMY,MAAM,GAACV,UAAU,CAACD,mBAAmB,CAAC;EAC5C,MAAMY,QAAQ,GAAEd,WAAW,CAAC,CAAC;EAC7B,MAAM,CAACe,MAAM,EAAEC,SAAS,CAAC,GAACrB,QAAQ,CAAC,CAAC;EACpC,MAAM,CAACsB,IAAI,EAAEC,OAAO,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAClC,MAAM,CAACwB,KAAK,EAAEC,QAAQ,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAEtCS,SAAS,CAAC,MAAM;IACZ;IACA,MAAMiB,YAAY,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;IAChE,MAAMC,WAAW,GAAGL,YAAY,CAACM,GAAG,CAAC,MAAM,CAAC;IAC5C,MAAMC,YAAY,GAAGP,YAAY,CAACM,GAAG,CAAC,OAAO,CAAC;IAC9CT,OAAO,CAACQ,WAAW,IAAI,OAAO,CAAC;IAC/BN,QAAQ,CAACQ,YAAY,IAAI,EAAE,CAAC;IAC5BC,OAAO,CAACC,GAAG,CAACT,YAAY,CAACM,GAAG,CAAC,MAAM,CAAC,CAAC;EACzC,CAAC,CAAC;EAEFvB,SAAS,CAAC,MAAM;IACZ,IAAIQ,OAAO,CAACmB,UAAU,EAAE;MACpBjB,QAAQ,CAAC,WAAW,CAAC;IACzB;EACJ,CAAC,EAAE,CAACF,OAAO,CAACmB,UAAU,EAAEjB,QAAQ,CAAC,CAAC;EAElC,MAAMkB,OAAO,GAAC,MAAMC,QAAQ,IAAG;IACnCJ,OAAO,CAACC,GAAG,CAACb,IAAI,CAAC;IACjB,IAAG,CAACA,IAAI,EAAE;IACL,IAAIA,IAAI,KAAG,QAAQ,IAAKgB,QAAQ,CAACC,QAAQ,KAAKD,QAAQ,CAAC,kBAAkB,CAAE,EAAC;MACxEjB,SAAS,CAAC,CAAC,4CAA4C,CAAC,CAAC;MACzD;IACJ;IACA,IAAImB,QAAQ;IACZ,IAAGlB,IAAI,KAAG,QAAQ,EAAC;MACnBkB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MACzBD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAACJ,QAAQ,CAACK,KAAK,CAAC;MACvCH,QAAQ,CAACE,MAAM,CAAC,UAAU,EAACJ,QAAQ,CAACC,QAAQ,CAAC;MAC7CC,QAAQ,CAACE,MAAM,CAAC,WAAW,EAACJ,QAAQ,CAACM,SAAS,CAAC;MAC/CV,OAAO,CAACC,GAAG,CAACG,QAAQ,EAACE,QAAQ,CAAC;MACnCN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAACR,GAAG,CAAC,OAAO,CAAC,EAACM,QAAQ,CAACC,QAAQ,CAAC;MAC/C,IAAGjB,IAAI,KAAG,QAAQ,EAAC;QAChBkB,QAAQ,CAACE,MAAM,CAAC,MAAM,EAACJ,QAAQ,CAACO,UAAU,GAAG,GAAG,GAAGP,QAAQ,CAACQ,SAAS,CAAC;QACtEN,QAAQ,CAACE,MAAM,CAAC,OAAO,EAACJ,QAAQ,CAACS,KAAK,CAAC;QACvC,IAAIT,QAAQ,CAACU,YAAY,IAAIV,QAAQ,CAACU,YAAY,CAAC,CAAC,CAAC,EACjDR,QAAQ,CAACE,MAAM,CAAC,cAAc,EAACJ,QAAQ,CAACU,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,KACzD;UAAA,IAAAC,oBAAA,EAAAC,mBAAA;UACA,MAAMC,QAAQ,GAAI,GAAE,EAAAF,oBAAA,GAAAX,QAAQ,CAACO,UAAU,cAAAI,oBAAA,uBAAnBA,oBAAA,CAAsB,CAAC,CAAC,KAAI,EAAG,GAAE,EAAAC,mBAAA,GAAAZ,QAAQ,CAACQ,SAAS,cAAAI,mBAAA,uBAAlBA,mBAAA,CAAqB,CAAC,CAAC,KAAI,EAAG,EAAC;UAEpFV,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAES,QAAQ,IAAI,UAAU,CAAC;QAC3D;QACRjB,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC;QAEb,IAAGA,QAAQ,CAACI,SAAS,KAAG,OAAO,IAAKN,QAAQ,CAACc,cAAc,KAAGd,QAAQ,CAACe,sBAAuB,EAAC;UAC3Fb,QAAQ,CAACE,MAAM,CAAC,UAAU,EAACJ,QAAQ,CAACgB,QAAQ,CAAC;UAC7Cd,QAAQ,CAACE,MAAM,CAAC,UAAU,EAACJ,QAAQ,CAACiB,QAAQ,CAAC;UAC7Cf,QAAQ,CAACE,MAAM,CAAC,cAAc,EAACJ,QAAQ,CAACkB,YAAY,CAAC;UACrDhB,QAAQ,CAACE,MAAM,CAAC,iBAAiB,EAACJ,QAAQ,CAACmB,eAAe,CAAC;UAC3DjB,QAAQ,CAACE,MAAM,CAAC,KAAK,EAACJ,QAAQ,CAACoB,GAAG,CAAC;UACnClB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAACJ,QAAQ,CAACqB,KAAK,CAAC;QAC3C;QACA;QACI,MAAMC,YAAY,GAAGtB,QAAQ,CAACuB,OAAO;QACrC;QACAD,YAAY,CAACE,OAAO,CAAC,CAACC,WAAW,EAAEC,KAAK,KAAK;UACzCxB,QAAQ,CAACE,MAAM,CAAE,WAAUsB,KAAM,GAAE,EAAED,WAAW,CAAC;QACrD,CAAC,CAAC;QAEFvB,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAACJ,QAAQ,CAACc,cAAc,CAAC;QACzDZ,QAAQ,CAACE,MAAM,CAAC,qBAAqB,EAACJ,QAAQ,CAAC2B,mBAAmB,CAAC;QACnEzB,QAAQ,CAACE,MAAM,CAAC,WAAW,EAACJ,QAAQ,CAAC4B,SAAS,CAAC;MACtD;MACA;MACD,MAAMC,OAAO,GAACC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;MACxD/B,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEyB,OAAO,IAAE,IAAI,CAAC;MAEzC,MAAMK,QAAQ,GAACJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC;MAC3D/B,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE8B,QAAQ,IAAE,IAAI,CAAC;MAE3C,MAAMC,MAAM,GAACL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;MACvD/B,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAC+B,MAAM,IAAE,IAAI,CAAC;IACtC,CAAC,MAEG,IAAInD,IAAI,KAAK,OAAO,EAAE;MACtBkB,QAAQ,GAAG4B,IAAI,CAACM,SAAS,CAAC;QACxB/B,KAAK,EAAEL,QAAQ,CAACK,KAAK;QACrBJ,QAAQ,EAAED,QAAQ,CAACC,QAAQ;QAC3B4B,OAAO,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI;QAC3DC,QAAQ,EAAEJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI,IAAI;QAC9DE,MAAM,EAAEL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI;MACxD,CAAC,CAAC;IACN;IAEArC,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC;IACpB,MAAMmC,QAAQ,GAAE,MAAMC,KAAK,CAAE,8BAA6BtD,IAAK,EAAC,EAAE;MACjEuD,MAAM,EAAE,MAAM;MACdC,OAAO,EAAExD,IAAI,KAAK,OAAO,GAAG;QAAE,cAAc,EAAE;MAAmB,CAAC,GAAG,CAAC,CAAC;MAAG;MAC1EyD,IAAI,EAAEvC;IACP,CAAC,CAAC;IAILN,OAAO,CAACC,GAAG,CAACwC,QAAQ,CAAC;IAGhB,IAAI,CAACA,QAAQ,CAACK,EAAE,EAAE;MAClB;MACA,IAAIC,SAAS,GAAC,IAAI;MAClB,IAAG;QACAA,SAAS,GAAG,MAAMN,QAAQ,CAACzE,IAAI,CAAC,CAAC;QAClCgC,OAAO,CAACgD,KAAK,CAAC,QAAQ,EAAED,SAAS,CAACE,OAAO,CAAC;MAC1C,CAAC,QAAMC,CAAC,EAAC;QACP/D,SAAS,CAAC+D,CAAC,CAACD,OAAO,CAAC;MACtB;MACC9D,SAAS,CAAC4D,SAAS,CAACE,OAAO,CAAC;MAC5B;MACD;MACD;IACH;;IAGL;IACC,IAAG7D,IAAI,KAAG,QAAQ,IAAIgB,QAAQ,CAACM,SAAS,KAAG,OAAO,EAAC;MAEhD,IAAG;QACC,MAAMyC,YAAY,GAAE,MAAMT,KAAK,CAAC,kDAAkD,EAAE;UAClFC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEX,IAAI,CAACM,SAAS,CAAClC,QAAQ;QAC9B,CAAC,CAAC;QACHN,OAAO,CAACC,GAAG,CAACwC,QAAQ,CAAC;MACzB,CAAC,CACD,OAAMW,GAAG,EAAC;QACNpD,OAAO,CAACC,GAAG,CAACmD,GAAG,CAAC;MACpB;IACJ;IACK,IAAG;MACD,MAAMC,OAAO,GAAE,MAAMZ,QAAQ,CAACzE,IAAI,CAAC,CAAC;MACpCgC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAACoD,OAAO,CAAC;MACrC,MAAMC,KAAK,GAACD,OAAO,CAACC,KAAK;MACzB,MAAMC,MAAM,GAACF,OAAO,CAACG,MAAM;MAC3B,MAAMC,QAAQ,GAACJ,OAAO,CAAC3C,SAAS;MAChC;MACA,MAAMgD,UAAU,GAAC,IAAIC,IAAI,CAAC,CAAC;MAC3BD,UAAU,CAACE,QAAQ,CAACF,UAAU,CAACG,QAAQ,CAAC,CAAC,GAAC,CAAC,CAAC;MAC5C7D,OAAO,CAACC,GAAG,CAACwD,QAAQ,CAAC;MAC1B;MACI,IAAG;QACD,IAAI3C,YAAY;UAACgD,UAAU,GAAC,IAAI;UAAEC,YAAY,GAAC,IAAI;QAClD,MAAMtB,QAAQ,GAAC,MAAMC,KAAK,CAAE,8BAA6Ba,MAAO,EAAC,CAAC;QACjE,IAAI,CAACd,QAAQ,EAAC;UACX,MAAM,IAAIuB,KAAK,CAAC,sBAAsB,CAAC;QAC1C;QACD,MAAMC,QAAQ,GAAC,MAAMxB,QAAQ,CAACzE,IAAI,CAAC,CAAC;QACpC,IAAGiG,QAAQ,EAAC;UAAA,IAAAC,aAAA,EAAAC,cAAA;UACV,MAAMC,UAAU,GAAEH,QAAQ,CAACI,IAAI;UAC/BrE,OAAO,CAACC,GAAG,CAACmE,UAAU,CAAC;UACvB,MAAME,SAAS,GAAEF,UAAU,CAACnC,OAAO;UACnC,MAAMsC,OAAO,GAAEH,UAAU,CAAC9B,QAAQ;UAClCxB,YAAY,GAAEsD,UAAU,CAACtD,YAAY;UACrCgD,UAAU,GAAEM,UAAU,CAACI,WAAW;UAClCT,YAAY,GAACK,UAAU,CAACK,uBAAuB;UAC/CzE,OAAO,CAACC,GAAG,CAAC,eAAe,GAAAiE,aAAA,GAAEH,YAAY,cAAAG,aAAA,uBAAZA,aAAA,CAAcQ,cAAc,CAAC;UAE1D,KAAAP,cAAA,GAAGJ,YAAY,cAAAI,cAAA,eAAZA,cAAA,CAAcO,cAAc,EAAC;YAC3B,IAAIC,oBAAoB;YACxB,IAAGlB,QAAQ,KAAG,OAAO,EAChBkB,oBAAoB,GAAC,MAAMjC,KAAK,CAAC,qCAAqC,EAAC;cACrEC,MAAM,EAAC,KAAK;cACZC,OAAO,EAAC;gBACJ,cAAc,EAAC,kBAAkB;gBAChC,eAAe,EAAC,SAAS,GAAEU;cAAK;YACrC,CAAC,CAAC,CAAC,KAELqB,oBAAoB,GAAC,MAAMjC,KAAK,CAAC,0CAA0C,EAAC;cACzEC,MAAM,EAAC,KAAK;cACZC,OAAO,EAAC;gBACJ,cAAc,EAAC,kBAAkB;gBAChC,eAAe,EAAC,SAAS,GAAEU;cAAK;YACrC,CAAC,CAAC;YAEV,IAAGqB,oBAAoB,CAAC7B,EAAE,EAAC;cACvB,MAAM;gBAAC8B;cAAa,CAAC,GAAC,MAAMD,oBAAoB,CAAC3G,IAAI,CAAC,CAAC;cACvD,IAAG4G,aAAa,EACbxC,YAAY,CAACyC,OAAO,CAAC,eAAe,EAAC3C,IAAI,CAACM,SAAS,CAACoC,aAAa,CAAC,CAAC;cAEtE5E,OAAO,CAACC,GAAG,CAAC2E,aAAa,CAAC;YAC9B;UACL;UACK,MAAME,UAAU,GAAC,MAAMpC,KAAK,CAAE,gDAA+Ca,MAAO,EAAC,EAAC;YACtFX,OAAO,EAAE;cACD,eAAe,EAAG,UAASU,KAAM,EAAC;cAClC,cAAc,EAAE;YACxB;UAAE,CAAC,CAAC;UACJtD,OAAO,CAACC,GAAG,CAAC6E,UAAU,CAAC;UACvB,IAAG,CAACA,UAAU,EACV,MAAM,IAAId,KAAK,CAAC,6BAA6B,CAAC;UAClD,MAAMzB,MAAM,GAAC,MAAMuC,UAAU,CAAC9G,IAAI,CAAC,CAAC;UACpC,MAAM+G,WAAW,GAACxC,MAAM,CAACyC,IAAI;UAE7BhF,OAAO,CAACC,GAAG,CAAC8E,WAAW,CAAC;UAE7B3C,YAAY,CAACyC,OAAO,CAAC,QAAQ,EAAE/D,YAAa,CAAC;UAC7Cd,OAAO,CAACC,GAAG,CAACiC,IAAI,CAACM,SAAS,CAAC1B,YAAY,CAAC,CAAC;UACzC,IAAG,CAAC/B,OAAO,CAACkG,OAAO,IAAIX,SAAS,IAAIpC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAC;YAC9E,IAAGiC,SAAS,KAAKpC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAC;cAC1D,IAAI6C,MAAM,GAACxF,MAAM,CAACyF,OAAO,CAAC,6DAA6D,CAAC;cACxF,IAAGD,MAAM,EAAC;gBACL;gBACC,MAAMxC,KAAK,CACJ,iCAAgC,EACrC;kBACIC,MAAM,EAAE,KAAK;kBACbC,OAAO,EAAC;oBAAC,cAAc,EAAC;kBAAkB,CAAC;kBAC3CC,IAAI,EAACX,IAAI,CAACM,SAAS,CAAC;oBAClB4C,EAAE,EAAC7B,MAAM;oBACTtB,OAAO,EAACC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;kBAAC,CAAC;gBACzD,CAAC,CAAC;cACV,CAAC,MAEID,YAAY,CAACyC,OAAO,CAAC,QAAQ,EAAC3C,IAAI,CAACM,SAAS,CAAC8B,SAAS,CAAC,CAAC;YAC7D,CAAC,MAEIlC,YAAY,CAACyC,OAAO,CAAC,QAAQ,EAAC3C,IAAI,CAACM,SAAS,CAAC8B,SAAS,CAAC,CAAC;UAChE;UACA,IAAG,CAACvF,OAAO,CAACkG,OAAO,IAAIV,OAAO,IAAIrC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAC;YAC5E,IAAGkC,OAAO,KAAKrC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAC;cACxD,IAAI6C,MAAM,GAACxF,MAAM,CAACyF,OAAO,CAAC,iEAAiE,CAAC;cAC5F,IAAGD,MAAM,EAAC;gBACL;gBACA,MAAMxC,KAAK,CACH,qCAAoC,EACzC;kBACIC,MAAM,EAAE,KAAK;kBACbC,OAAO,EAAC;oBAAC,cAAc,EAAC;kBAAkB,CAAC;kBAC3CC,IAAI,EAACX,IAAI,CAACM,SAAS,CAAC;oBAClB4C,EAAE,EAAC7B,MAAM;oBACTjB,QAAQ,EAACJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;kBAAC,CAAC;gBAC5D,CAAC,CAAC;cACV,CAAC,MAEID,YAAY,CAACyC,OAAO,CAAC,UAAU,EAAC3C,IAAI,CAACM,SAAS,CAAC+B,OAAO,CAAC,CAAC;YAChE,CAAC,MAEEnC,YAAY,CAACyC,OAAO,CAAC,UAAU,EAAC3C,IAAI,CAACM,SAAS,CAAC+B,OAAO,CAAC,CAAC;UAE/D;UAEA,IAAGQ,WAAW,EACP3C,YAAY,CAACyC,OAAO,CAAC,QAAQ,EAAC3C,IAAI,CAACM,SAAS,CAACuC,WAAW,CAAC,CAAC;QAEnE;QACA/E,OAAO,CAACC,GAAG,CAAC6D,UAAU,EAAEC,YAAY,CAAC;QACrC;QACA;;QAEFhF,OAAO,CAACsG,KAAK,CAAC9B,MAAM,EAAED,KAAK,EAAEI,UAAU,EAACD,QAAQ,EAAEM,YAAY,CAAC;MAE/D,CAAC,QAAMf,KAAK,EACZ;QACEhD,OAAO,CAACC,GAAG,CAAC+C,KAAK,CAACC,OAAO,CAAC;MAC5B;MACN;;MAIM;MACA;MACA;MACC,IAAG3D,KAAK,IAAIA,KAAK,KAAG,MAAM,EACtBI,MAAM,CAAC4F,OAAO,CAACC,IAAI,CAAC,CAAC;MAEzB,IAAG9B,QAAQ,KAAG,OAAO,EAAC;QAClBxE,QAAQ,CAAC,eAAe,CAAC;MAC7B,CAAC,MAEGA,QAAQ,CAAC,WAAW,CAAC;MAClBe,OAAO,CAACC,GAAG,CAACqD,KAAK,EAAEC,MAAM,EAAEG,UAAU,CAAC;IAE7C,CAAC,QAAMR,CAAC,EAAC;MACN/D,SAAS,CAAC+D,CAAC,CAACD,OAAO,CAAC;IAEtB;EACT,CAAC;EACD,oBACAvE,OAAA,CAAAE,SAAA;IAAA4G,QAAA,GAEItG,MAAM,iBAAIR,OAAA,CAACF,YAAY;MAACiH,MAAM,EAAC,OAAO;MAACxC,OAAO,EAAE/D;IAAO;MAAAwG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAC3DnH,OAAA,CAACX,QAAQ;MAAC+H,QAAQ,EAAE3F;IAAQ;MAAAuF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC;EAAA,eAC9B,CAAC;AAEH,CAAC;AAAA/G,EAAA,CAnSKD,kBAAkB;EAAA,QAGRV,WAAW;AAAA;AAAA4H,EAAA,GAHrBlH,kBAAkB;AAoSxB,eAAeA,kBAAkB;AAAC,IAAAkH,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}